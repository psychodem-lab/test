<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Psychologa - System Diagnostyczny</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --surface: #ffffff;
            --text: #0f172a;
            --muted: #64748b;
            --border: #e2e8f0;
            --accent: #4f46e5;
        }

        /* --- Global Reset & Mobile --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.5;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- Login Screen --- */
        #login-screen {
            position: fixed; inset: 0; background: var(--bg);
            display: flex; align-items: center; justify-content: center; z-index: 2000;
            padding: 20px;
        }
        .login-card {
            background: var(--surface); padding: 2rem; border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); width: 100%; max-width: 400px;
            text-align: center;
        }
        .login-card h2 { margin-bottom: 1.5rem; }
        .login-card input {
            width: 100%; padding: 0.8rem; margin-bottom: 1rem;
            border: 1px solid var(--border); border-radius: 8px; font-size: 1rem;
        }

        /* --- Dashboard Layout --- */
        #dashboard { display: none; padding: 1rem; max-width: 900px; margin: 0 auto; }
        
        header {
            background: var(--surface); padding: 1.5rem; border-radius: 12px;
            margin-bottom: 1rem; border: 1px solid var(--border);
        }
        .patient-data {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 1rem;
        }
        input[type="text"], input[type="date"] {
            width: 100%; padding: 0.6rem; border: 1px solid var(--border); border-radius: 6px;
            font-family: inherit; font-size: 0.9rem;
        }

        /* --- Tabs --- */
        .nav-tabs {
            display: flex; gap: 8px; overflow-x: auto; padding-bottom: 8px;
            margin-bottom: 1.5rem; scrollbar-width: none;
        }
        .nav-tabs::-webkit-scrollbar { display: none; }
        .tab-link {
            flex: 0 0 auto; background: var(--surface); border: 1px solid var(--border);
            padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 0.85rem;
            font-weight: 500; transition: 0.2s;
        }
        .tab-link.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* --- Test Content --- */
        .test-section { display: none; background: var(--surface); border-radius: 12px; padding: 1.5rem; border: 1px solid var(--border); }
        .test-section.active { display: block; }
        .test-header { margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 1rem; }
        .test-header h2 { font-size: 1.25rem; }
        .test-header p { font-size: 0.85rem; color: var(--muted); margin-top: 4px; }

        /* --- Question UI --- */
        .question-row { margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px outline var(--bg); }
        .q-text { font-weight: 500; display: block; margin-bottom: 0.75rem; font-size: 0.95rem; }
        .options-group { display: flex; gap: 8px; flex-wrap: wrap; }
        
        .opt-label {
            flex: 1; min-width: 60px; display: flex; flex-direction: column; align-items: center;
            padding: 10px; border: 1px solid var(--border); border-radius: 8px; cursor: pointer;
            font-size: 0.8rem; transition: 0.2s; text-align: center;
        }
        .opt-label:hover { background: #f1f5f9; }
        .opt-label input { margin-bottom: 4px; }
        .opt-label.selected { background: #e0e7ff; border-color: var(--primary); }

        /* --- Result Styling --- */
        .result-panel {
            margin-top: 2rem; padding: 1.5rem; background: #f1f5f9; border-radius: 8px;
            border-left: 4px solid var(--primary); display: none;
        }
        .res-line { display: flex; justify-content: space-between; margin-bottom: 0.4rem; padding: 5px 0; border-bottom: 1px solid #e2e8f0; }
        .res-line span { font-weight: bold; }

        /* --- Action Buttons --- */
        .actions {
            position: sticky; bottom: 20px; left: 0; right: 0; 
            display: flex; gap: 10px; justify-content: center; padding: 10px;
            background: rgba(248, 250, 252, 0.8); backdrop-filter: blur(8px);
        }
        .btn {
            padding: 12px 24px; border-radius: 30px; border: none; font-weight: 600;
            cursor: pointer; font-size: 0.9rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.95); }
        .btn-calc { background: var(--accent); color: white; }
        .btn-print { background: #10b981; color: white; }

        /* --- PRINT STYLES --- */
        @media print {
            body { background: white; }
            #login-screen, .nav-tabs, .actions, .btn-calc, header h1 { display: none !important; }
            #dashboard { display: block !important; padding: 0; width: 100%; }
            .test-section { display: none !important; }
            .test-section.active { display: block !important; border: none !important; }
            .result-panel { display: block !important; background: white !important; border: 1px solid #000 !important; }
            input { border: none !important; font-weight: bold; }
        }

        @media (max-width: 600px) {
            .options-group { display: grid; grid-template-columns: 1fr; }
            .opt-label { flex-direction: row; gap: 10px; text-align: left; }
        }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="login-card">
        <h2>Panel Psychologa</h2>
        <input type="password" id="pass" placeholder="Hasło">
        <button class="btn btn-calc" style="width:100%" onclick="login()">Zaloguj się</button>
    </div>
</div>

<div id="dashboard">
    <header>
        <h1>System Diagnostyczny</h1>
        <div class="patient-data">
            <div>
                <label style="font-size:0.7rem; color:var(--muted)">Inicjały Pacjenta</label>
                <input type="text" id="p-init" placeholder="np. A.B.">
            </div>
            <div>
                <label style="font-size:0.7rem; color:var(--muted)">Data badania</label>
                <input type="date" id="p-date">
            </div>
        </div>
    </header>

    <nav class="nav-tabs">
        <button class="tab-link active" onclick="openTab(event, 't-dass')">DASS-21</button>
        <button class="tab-link" onclick="openTab(event, 't-phq9')">PHQ-9</button>
        <button class="tab-link" onclick="openTab(event, 't-gad7')">GAD-7</button>
        <button class="tab-link" onclick="openTab(event, 't-bdi')">BDI-II</button>
    </nav>

    <div id="t-dass" class="test-section active">
        <div class="test-header">
            <h2>DASS-21</h2>
            <p>Skala Depresji, Lęku i Stresu (0 - wcale, 3 - bardzo często).</p>
        </div>
        <form id="f-dass"></form>
        <div id="res-dass" class="result-panel"></div>
    </div>

    <div id="t-phq9" class="test-section">
        <div class="test-header">
            <h2>PHQ-9</h2>
            <p>Kwestionariusz Zdrowia Pacjenta.</p>
        </div>
        <form id="f-phq9"></form>
        <div id="res-phq9" class="result-panel"></div>
    </div>

    <div id="t-gad7" class="test-section">
        <div class="test-header">
            <h2>GAD-7</h2>
            <p>Skala Lęku Uogólnionego.</p>
        </div>
        <form id="f-gad7"></form>
        <div id="res-gad7" class="result-panel"></div>
    </div>

    <div id="t-bdi" class="test-section">
        <div class="test-header">
            <h2>BDI-II</h2>
            <p>Inwentarz Depresji Becka.</p>
        </div>
        <form id="f-bdi"></form>
        <div id="res-bdi" class="result-panel"></div>
    </div>

    <div class="actions">
        <button class="btn btn-calc" onclick="calculateCurrent()">Oblicz wynik</button>
        <button class="btn btn-print" onclick="window.print()">Drukuj / PDF</button>
    </div>
</div>

<script>
    const PASS = "psycholog2026";

    function login() {
        if(document.getElementById('pass').value === PASS) {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            document.getElementById('p-date').valueAsDate = new Date();
            initTests();
        } else alert("Błędne hasło");
    }

    function openTab(evt, id) {
        document.querySelectorAll('.test-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-link').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        evt.currentTarget.classList.add('active');
        window.scrollTo(0,0);
    }

    function initTests() {
        // DASS-21
        const dQ = ["Trudno było mi się uspokoić", "Czułem(am) suchość w ustach", "Nie potrafiłem(am) odczuwać żadnych pozytywnych uczuć", "Miałem(am) trudności z oddychaniem (np. szybki oddech)", "Trudno było mi nabrać inicjatywy do działania", "Miałem(am) tendencję do przesadnego reagowania", "Czułem(am) drżenie (np. rąk)", "Czułem(am), że zużywam dużo nerwowej energii", "Martwiłem(am) się sytuacjami, w których mogę wpaść w panikę", "Czułem(am), że nie mam na co czekać w przyszłości", "Czułem(am), że staję się poddenerwowany(a)", "Trudno było mi się zrelaksować", "Czułem(am) się przygnębiony(a) i smutny(a)", "Nie tolerowałem(am) niczego, co przeszkadzało mi w działaniu", "Czułem(am), że jestem bliski(a) paniki","Nie potrafiłem(am) się niczym entuzjazmować", "Czułem(am), że nie jestem wiele wart(a)", "Czułem(am), że jestem przewrażliwiony(a)", "Byłem(am) świadomy(a) rytmu serca bez wysiłku", "Czułem(am) się wystraszony(a) bez powodu", "Czułem(am), że życie nie ma sensu""];
        genForm('f-dass', dQ, 4, 'd');

        // PHQ-9
        const pQ = ["Małe zainteresowanie/radość", "Przygnębienie/beznadzieja", "Problemy ze snem", "Zmęczenie/brak energii", "Apetyt (brak/nadmiar)", "Poczucie porażki", "Problemy z koncentracją", "Spowolnienie/pobudzenie", "Myśli o samookaleczeniu"];
        genForm('f-phq9', pQ, 4, 'p', ["Wcale", "Kilka dni", "Połowa dni", "Codziennie"]);

        // GAD-7
        const gQ = ["Zdenerwowanie/lęk", "Brak kontroli nad martwieniem", "Martwienie się na zapas", "Trudno się odprężyć", "Niepokój ruchowy", "Irytacja", "Strach przed najgorszym"];
        genForm('f-gad7', gQ, 4, 'g', ["Wcale", "Kilka dni", "Połowa dni", "Codziennie"]);

        // BDI-II
        const bQ = [
            {q: "Smutek", o: ["Nie jestem w ogóle smutny ani przygnębiony.", "Czuję się smutny przez większość czasu.", "Jestem stale smutny i przygnębiony.", "Jestem tak nieszczęśliwy i smutny, że jest to nie do wytrzymania."]},
            {q: "Pesymizm", o: ["Nie obawiam się o swoją przyszłość.", "Obawiam się o przyszłość bardziej niż dotychczas.", "Nie oczekuję, że przyszłość będzie się dla mnie układać pomyślnie.", "Uważam, że moja przyszłość jest beznadziejna i że będzie coraz gorsza."]},
            {q: "Przeszłe niepowodzenia", o: ["Nie czuję, że odnosiłem wiele porażek.", "Zawodziłem więcej razy niż powinienem", "Patrząc wstecz, widzę dużo niepowodzeń.", "Uważam, że jako człowiek jestem totalnym nieudacznikiem."]},
            {q: "Odczuwanie przyjemności", o: ["Robienie rzeczy, które lubię dostarcza mi tyle samo przyjemności co w przeszłości.", "To co robię nie sprawia mi takiej samej przyjemności jak kiedyś.", "Odczuwam bardzo niewiele przyjemności z rzeczy, które kiedyś lubiłem.", "Nie odczuwam żadnej przyjemności z rzeczy, które kiedyś lubiłem."]},
            {q: "Poczucie winy", o: ["Nie czuje się szczególnie winien.", "Czuję się winny z powodu wielu rzeczy, które zrobiłem lub których nie zrobiłem.", "Czuję się winny przez większość czasu.", "Czuje się winny bez przerwy."]},
            {q: "Poczucie kary", o: ["Nie czuję żebym był karany.", "Czuję, że mogę zostać ukarany.", "Oczekuję kary.", "Czuję, że jestem karany."]},
            {q: "Stosunek do samego siebie", o: ["Mam o sobie takie samo zdanie jak przedtem.", "Straciłem  wiarę w siebie.", "Zawiodłem się na sobie.", "Czuję do siebie niechęć."]},
            {q: "Samokrytycyzm", o: ["Nie krytykuję siebie anie nie obwiniam więcej niż kiedyś.", "Jestem bardziej krytycznie nastawiony do siebie niż kiedyś.", "Krytykuję siebie za wszystkie swoje niepowodzenia.", "Obwiniam się za każde zło, które się wydarza."]},
            {q: "Myśli samobójcze", o: ["Nie myślę o zabiciu się.", "Myślę o tym, by się zabić, ale wiem, że bym tego nie zrobił.", "Pragnę się zabić.", "Zabije się jeśli tylko natrafi się odpowiednia do tego sposobność."]},
            {q: "Płacz", o: ["Nie płaczę częściej niż zazwyczaj.", "Płaczę częściej niż zazwyczaj.", "Płaczę ciągle, nawet z powodu drobnostek.", "Chciałbym płakać, ale nie jestem w stanie."]},
            {q: "Pobudzenie", o: ["Nie czuje się bardziej niespokojny czy pobudzony niż dawniej.", "Czuje się bardziej niespokojny czy pobudzony niż dawniej.", "Jestem tak pobudzony i niespokojny, że trudno mi się uspokoić.", "Jestem tak pobudzony i nisepokojny, że muszę wciąż coś robić lub poruszać się."]},
            {q: "Utrata zainteresowań", o: ["Ludzie i czynności codzienne interesują mnie tak jak dawniej.", "Coraz mniej interesują mnie otaczający mnie ludzie oraz czynności codzienne.", "Utraciłem większość zainteresowania ludźmi albo czynnościami codziennymi.", "Trudno mi się czymkolwiek zainteresować."]},
            {q: "Niezdecydowanie", o: ["Podejmuję decyzje tak łatwo jak kiedyś.", "Trudniej jest mi podejmować decyzje niż kiedyś.", "Mam dużą trudność w podejmowaniu decyzji.", "Nie jestem w stanie podejmować jakichkolwiek decyzji."]},
            {q: "Bezużyteczność", o: ["Nie czuję się bezwartościowy.", "Nie uważam, że jestem równie przydatny i warty uwagi jak kiedyś.", "Czuje się bardziej bezwartościowy w porównaniu do innych.", "Czuję się całkowicie bezwartościowy."]},
            {q: "Utrata energii", o: ["Mam tyle samo energii co dawniej.", "Mam mniej energii niż dawniej.", "Nie mam wystarczającej ilości energii aby wykonywać większość czynności.", "Nie mam energii aby robić cokolwiek."]},
            {q: "Zmiany we wzorcu snu", o: ["Sypiam tak dobrze jak dotychczas.", "Śpię nieco więcej/mniej niż dotychczas.", "Śpię znacznie więcej/mniej niż dotychczas.", "Budzę się 1-2 godziny za wcześnie i nie mogę ponownie usnąć/ śpię przez większość dnia."]},
            {q: "Drażliwość", o: ["Nie jestem bardziej drażliwy niż zazwyczaj.", "Jestem bardziej drażliwy niż zazwyczaj.", "Jestem o wiele bardziej drażliwy niż zazwyczaj.", "Jestem drażliwy przez cały czas."]},
            {q: "Zmiany apetycie", o: ["Mam taki sam apetyt jak zwykle.", "Mam trochę mniejszy/większy apetyt niż dotychczas.", "Mam znacznie mniejszy/większy apetyt niż dotychczas.", "Nie mam w ogóle apetytu / jestem głodny cały czas."]},
            {q: "Problemy z koncentracją", o: ["Umiem się koncentrować tak dobrze jak wcześniej.", "Nie umiem koncentrować się tak dobrze jak wcześniej.", "Trudno mi skupić się na czymś przez dłuższy czas.", "Nie mogę skoncentrować się na niczym."]},
            {q: "Zmęczenie", o: ["Nie czuję się bardziej zmęczony niż dotychczas.", "Męczę się szybciej niż zazwyczaj.", "Jestem tak zmęczony, że nie mogę wykonywać wielu zadań, które dotychczas wykonywałem.", "Jestem zbyt zmęczony  żeby wykonywać większość czynności, które dotychczas wykonywałem."]},
            {q: "Utrata zainteresowania seksem", o: ["Moje zainteresowanie seksem nie uległo zmianie.", "Jestem mniej zainteresowany seksem niż dotychczas.", "Jestem obecnie dużo mniej zainteresowany seksem niż dotychczas.", "Straciłem całkowite zainteresowanie seksem."]}
        ];
        genFormBDI('f-bdi', bQ, 'b');
    }

    function genForm(id, qs, n, prefix, labels=null) {
        const f = document.getElementById(id);
        f.innerHTML = qs.map((q, i) => `
            <div class="question-row">
                <span class="q-text">${i+1}. ${q}</span>
                <div class="options-group">
                    ${Array(n).fill(0).map((_, v) => `
                        <label class="opt-label">
                            <input type="radio" name="${prefix}${i}" value="${v}" required>
                            <span>${labels ? labels[v] : v}</span>
                        </label>
                    `).join('')}
                </div>
            </div>
        `).join('');
    }

    function genFormBDI(id, questions, prefix) {
        const f = document.getElementById(id);
        f.innerHTML = questions.map((item, i) => `
            <div class="question-row">
                <span class="q-text">${i+1}. ${item.q}</span>
                <div class="options-group">
                    ${item.o.map((opt, v) => `
                        <label class="opt-label">
                            <input type="radio" name="${prefix}${i}" value="${v}" required>
                            <span>${opt}</span>
                        </label>
                    `).join('')}
                </div>
            </div>
        `).join('');
    }

    function calculateCurrent() {
        const activeSection = document.querySelector('.test-section.active');
        const activeId = activeSection.id;
        const inputs = activeSection.querySelectorAll('input[type="radio"]');
        const names = [...new Set([...inputs].map(i => i.name))];
        const checked = activeSection.querySelectorAll('input:checked');

        if(checked.length < names.length) {
            alert("Proszę odpowiedzieć na wszystkie pytania w tej sekcji!");
            return;
        }

        if(activeId === 't-dass') calcDASS();
        if(activeId === 't-phq9') calcPHQ();
        if(activeId === 't-gad7') calcGAD();
        if(activeId === 't-bdi') calcBDI();
    }

    function calcDASS() {
        const getSum = (idx) => {
            let s = 0;
            idx.forEach(i => {
                const r = document.querySelector(`input[name="d${i}"]:checked`);
                if(r) s += parseInt(r.value);
            });
            return s * 2;
        };
        const d = getSum([2,4,9,12,15,16,20]);
        const a = getSum([1,3,6,8,14,18,19]);
        const s = getSum([0,5,7,10,11,13,17]);

        const interp = (v, th) => v<=th[0]?"Norma":v<=th[1]?"Łagodny":v<=th[2]?"Umiarkowany":v<=th[3]?"Silny":"B. Silny";
        
        document.getElementById('res-dass').innerHTML = `
            <h3>Wyniki DASS-21:</h3>
            <div class="res-line">Depresja: <span>${d} - ${interp(d, [9,13,20,27])}</span></div>
            <div class="res-line">Lęk: <span>${a} - ${interp(a, [7,9,14,19])}</span></div>
            <div class="res-line">Stres: <span>${s} - ${interp(s, [14,18,25,33])}</span></div>
        `;
        document.getElementById('res-dass').style.display = 'block';
    }

    function calcPHQ() {
        let sum = 0;
        document.querySelectorAll('#f-phq9 input:checked').forEach(i => sum += parseInt(i.value));
        const txt = sum<=4?"Norma":sum<=9?"Łagodna":sum<=14?"Umiarkowana":sum<=19?"Umiarkowanie ciężka":"Ciężka";
        document.getElementById('res-phq9').innerHTML = `<h3>Suma PHQ-9: ${sum}</h3><p>Interpretacja: ${txt}</p>`;
        document.getElementById('res-phq9').style.display = 'block';
    }

    function calcGAD() {
        let sum = 0;
        document.querySelectorAll('#f-gad7 input:checked').forEach(i => sum += parseInt(i.value));
        const txt = sum<=4?"Norma":sum<=9?"Łagodny":sum<=14?"Umiarkowany":"Silny";
        document.getElementById('res-gad7').innerHTML = `<h3>Suma GAD-7: ${sum}</h3><p>Interpretacja: ${txt}</p>`;
        document.getElementById('res-gad7').style.display = 'block';
    }

    function calcBDI() {
        let sum = 0;
        document.querySelectorAll('#f-bdi input:checked').forEach(i => sum += parseInt(i.value));
        let interpretation = "";
        if (sum <= 13) interpretation = "Minimalna depresja.";
        else if (sum <= 19) interpretation = "Łagodna depresja.";
        else if (sum <= 28) interpretation = "Umiarkowana depresja.";
        else interpretation = "Ciężka depresja.";

        document.getElementById('res-bdi').innerHTML = `<h3>Suma BDI-II: ${sum} pkt</h3><p>Interpretacja: ${interpretation}</p>`;
        document.getElementById('res-bdi').style.display = 'block';
    }
</script>

</body>
</html>
